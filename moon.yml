language: python
type: application
tasks:
  # Aggregated tasks that call individual package tasks
  bootstrap:
    deps:
      - 'infra:bootstrap'
    local: true

  layer:
    deps:
      - 'infra:layer'

  diff:
    deps:
      - 'infra:diff'

  deploy:
    deps:
      - 'infra:deploy'

  deploy-all:
    deps:
      - 'infra:deploy'
      - 'web:build'

  synth:
    deps:
      - 'infra:synth'

  destroy:
    deps:
      - 'infra:destroy'
    local: true

  import-data:
    deps:
      - 'scripts:import-data'
    local: true

  # Development commands
  dev-api:
    deps:
      - 'api:dev'
    local: true

  dev-web:
    deps:
      - 'web:dev'
    local: true

  # Testing and linting
  lint:
    deps:
      - 'api:lint'
      - 'infra:lint'
      - 'scripts:lint'

  test:
    deps:
      - 'api:test'
      - 'infra:test'
      - 'scripts:test'
      - 'web:test'

  clean:
    deps:
      - 'infra:clean'
    local: true
